{"ast":null,"code":"import _regeneratorRuntime from\"/home/vaseles/projects/JavaScript/React/text-writer/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/vaseles/projects/JavaScript/React/text-writer/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/vaseles/projects/JavaScript/React/text-writer/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vaseles/projects/JavaScript/React/text-writer/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Configuration,OpenAIApi}from'openai';import styles from'./App.module.scss';import Input from'../components/UI/Input/Input';import Button from'../components/UI/Button/Button';import Loading from'../components/UI/Loading/Loading';// import OPENAI_API_KEY from './constants.js'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var OPENAI_API_KEY='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';var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var configuration=new Configuration({apiKey:OPENAI_API_KEY});var openai=new OpenAIApi(configuration);var answer=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(text){var completion;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.next=3;return openai.createChatCompletion({model:\"gpt-3.5-turbo\",messages:[{role:\"user\",content:text}]});case 3:completion=_context.sent;setIsLoading(false);setMessages([].concat(_toConsumableArray(messages),[completion.data.choices[0].message.content]));case 6:case\"end\":return _context.stop();}},_callee);}));return function answer(_x){return _ref.apply(this,arguments);};}();var sendMessage=function sendMessage(e){e.preventDefault();setMessages([].concat(_toConsumableArray(messages),[message]));answer(message);setMessage('');};return/*#__PURE__*/_jsx(\"div\",{className:styles.pre__home,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.home,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.messages,children:[messages.map(function(mess,index){return/*#__PURE__*/_jsx(\"div\",{className:styles.message,children:mess},index);}),isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsxs(\"form\",{className:styles.home__form,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",value:message,onChange:function onChange(e){return setMessage(e.target.value);}}),/*#__PURE__*/_jsx(Button,{text:'send',onClick:sendMessage})]})]})});};export default App;","map":{"version":3,"names":["React","useState","Configuration","OpenAIApi","styles","Input","Button","Loading","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","OPENAI_API_KEY","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","messages","setMessages","_useState5","_useState6","isLoading","setIsLoading","configuration","apiKey","openai","answer","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","text","completion","wrap","_callee$","_context","prev","next","createChatCompletion","model","role","content","sent","concat","_toConsumableArray","data","choices","stop","_x","apply","arguments","sendMessage","e","preventDefault","className","pre__home","children","home","map","mess","index","home__form","type","value","onChange","target","onClick"],"sources":["/home/vaseles/projects/JavaScript/React/text-writer/src/App/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {Configuration, OpenAIApi} from 'openai'\n\nimport styles from './App.module.scss';\n\nimport Input from '../components/UI/Input/Input';\nimport Button from '../components/UI/Button/Button';\nimport Loading from '../components/UI/Loading/Loading';\n\n// import OPENAI_API_KEY from './constants.js'\n\n\nconst App = () => {\n  const OPENAI_API_KEY = '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'\n\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const configuration = new Configuration({\n    apiKey: OPENAI_API_KEY,\n  });\n\n  const openai = new OpenAIApi(configuration);\n\n  const answer = async (text) => {\n    setIsLoading(true)\n    let completion = await openai.createChatCompletion({\n      model: \"gpt-3.5-turbo\",\n      messages: [{role: \"user\", content: text }],\n    });\n\n    setIsLoading(false)\n    setMessages([...messages, completion.data.choices[0].message.content]);\n  }\n\n  const sendMessage = (e) => {\n    e.preventDefault();\n    \n    setMessages([...messages, message]);\n\n    answer(message);\n    setMessage('');\n  }\n\n  return (\n    <div className={styles.pre__home}>\n      <div className={styles.home}>\n        <div className={styles.messages}>\n          {messages.map((mess, index) => (\n            <div key={index} className={styles.message}>{mess}</div>\n          ))}\n        {isLoading? <Loading/>: <></>}\n        </div>\n        <form className={styles.home__form}>\n          <Input \n            type='text'\n            value={message}\n            onChange = {(e) => setMessage(e.target.value)}\n          />\n          <Button text={'send'} onClick={sendMessage}/>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}